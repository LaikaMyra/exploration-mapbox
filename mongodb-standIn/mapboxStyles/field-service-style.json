{
    "version": 8,
    "name": "Field Service Operations",
    "sources": {
        "technicians": {
            "type": "geojson",
            "data": "technicians"
        },
        "jobs": {
            "type": "geojson",
            "data": "jobs"
        },
        "locations": {
            "type": "geojson",
            "data": "locations"
        }
    },
    "sprite": "mapbox://sprites/mapbox/streets-v11",
    "glyphs": "mapbox://fonts/mapbox/{fontstack}/{range}.pbf",
    "layers": [
        {
            "id": "locations-background",
            "type": "circle",
            "source": "locations",
            "minzoom": 0,
            "maxzoom": 24,
            "filter": ["==", ["get", "type"], "job"],
            "paint": {
                "circle-radius": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    12,
                    8
                ],
                "circle-color": "#3bb2d0",
                "circle-opacity": 0.8
            }
        },
        {
            "id": "locations-labels",
            "type": "symbol",
            "source": "locations",
            "minzoom": 0,
            "maxzoom": 24,
            "filter": ["==", ["get", "type"], "job"],
            "layout": {
                "text-field": ["get", "name"],
                "text-offset": [0, 1.5],
                "text-anchor": "top",
                "text-allow-overlap": false,
                "text-ignore-placement": false
            },
            "paint": {
                "text-color": "#202",
                "text-halo-color": "#fff",
                "text-halo-width": 1,
                "text-opacity": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    1,
                    0.8
                ]
            }
        },
        {
            "id": "technicians",
            "type": "circle",
            "source": "technicians",
            "minzoom": 0,
            "maxzoom": 24,
            "paint": {
                "circle-radius": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    12,
                    8
                ],
                "circle-color": [
                    "case",
                    ["==", ["get", "status"], "available"],
                    "#50C878",
                    ["==", ["get", "status"], "on_job"],
                    "#FFA500",
                    "#808080"
                ],
                "circle-opacity": 0.8,
                "circle-stroke-width": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    3,
                    2
                ],
                "circle-stroke-color": "#fff"
            }
        },
        {
            "id": "technician-labels",
            "type": "symbol",
            "source": "technicians",
            "minzoom": 0,
            "maxzoom": 24,
            "layout": {
                "text-field": [
                    "concat",
                    ["get", "name"],
                    "\n",
                    ["get", "status"]
                ],
                "text-offset": [0, 1.5],
                "text-anchor": "top",
                "text-allow-overlap": false,
                "text-ignore-placement": false
            },
            "paint": {
                "text-color": "#202",
                "text-halo-color": "#fff",
                "text-halo-width": 1,
                "text-opacity": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    1,
                    0.8
                ]
            }
        },
        {
            "id": "jobs",
            "type": "circle",
            "source": "jobs",
            "minzoom": 0,
            "maxzoom": 24,
            "paint": {
                "circle-radius": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    12,
                    8
                ],
                "circle-color": [
                    "case",
                    ["==", ["get", "status"], "in-progress"],
                    "#FF4500",
                    ["==", ["get", "status"], "pending"],
                    "#FFD700",
                    "#808080"
                ],
                "circle-opacity": 0.8,
                "circle-stroke-width": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    3,
                    2
                ],
                "circle-stroke-color": "#fff"
            }
        },
        {
            "id": "job-labels",
            "type": "symbol",
            "source": "jobs",
            "minzoom": 0,
            "maxzoom": 24,
            "layout": {
                "text-field": [
                    "concat",
                    ["get", "title"],
                    "\n",
                    ["get", "status"],
                    " (",
                    ["get", "priority"],
                    ")"
                ],
                "text-offset": [0, 1.5],
                "text-anchor": "top",
                "text-allow-overlap": false,
                "text-ignore-placement": false
            },
            "paint": {
                "text-color": "#202",
                "text-halo-color": "#fff",
                "text-halo-width": 1,
                "text-opacity": [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    1,
                    0.8
                ]
            }
        }
    ]
} 